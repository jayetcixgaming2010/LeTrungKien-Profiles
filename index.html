<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <meta name="description" content="Profiles của Lê Trung Kiên, học sinh lớp 10 đam mê học hỏi và khám phá.">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#111">
  <title>Lê Trung Kiên Profiles</title>
  <link rel="icon" type="image/png" href="logo.png">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <video class="video-background" autoplay muted loop playsinline preload="auto">
    <source src="background-video.mp4" type="video/mp4">
    Your browser does not support the video tag.
  </video>
  <div class="blur-overlay"></div>
  <div class="container parallax">
    <div class="avatar-container">
      <div class="avatar-frame"></div>
      <img src="logo.png" alt="Avatar" class="avatar">
    </div>
    <div class="bio">
      <h1>Lê Trung Kiên</h1>
      <p>Xin chào! Tôi là Kiên, một học sinh lớp 10 đam mê học hỏi nhiều điều mới lạ, bổ ích...</p>
    </div>
    <div class="nav-buttons">
      <div class="top-row">
      <a href="https://www.facebook.com/profile.php?id=61578651402864" class="liquid-glass-button" target="_blank" rel="noopener noreferrer">
        <img src="Facebook.png" alt="Facebook" style="height:24px;vertical-align:middle;margin-right:8px;">My Facebook
      </a>
      <a href="https://github.com/jayetcixgaming2010" class="liquid-glass-button" target="_blank" rel="noopener noreferrer">
        <img src="Github.png" alt="Github" style="height:24px;vertical-align:middle;margin-right:8px;">My Github
      </a>
      <a href="https://www.tiktok.com/@letrungkiendz_2k10" class="liquid-glass-button" target="_blank" rel="noopener noreferrer">
        <img src="Tiktok.png" alt="Tiktok" style="height:24px;vertical-align:middle;margin-right:8px;">My Tiktok
      </a>
    </div>

      <div class="bottom-row"></div>
      <a href="https://www.facebook.com/profile.php?id=61578651402864" class="liquid-glass-button" target="_blank" rel="noopener noreferrer">
        <img src="Facebook.png" alt="Facebook" style="height:24px;vertical-align:middle;margin-right:8px;">Fanpages Class
      </a>
      <a href="https://www.tiktok.com/@10a2k26thptquelam" class="liquid-glass-button" target="_blank" rel="noopener noreferrer">
        <img src="Tiktok.png" alt="Tiktok" style="height:24px;vertical-align:middle;margin-right:8px;">Tiktok Class
      </a>
    </div>
    <div class="footer">
      <span>@Made by <a href="https://www.facebook.com/le.trung.kien.2k10/" target="_blank">Kiên</a> with 💖 | 2025</span>
    </div>
  </div>
  <div class="music-player">
    <div class="music-toggle playing" id="musicToggle"></div>
    <input type="range" min="0" max="1" step="0.01" value="0.5" class="volume-control" id="volumeControl">
  </div>
  <audio id="backgroundMusic" autoplay loop preload="auto" playsinline>
    <source src="music.mp3" type="audio/mpeg">
  </audio>


  <script>
    // Initialize elements
    const video = document.querySelector('.video-background');
    const music = document.getElementById('backgroundMusic');
    const musicToggle = document.getElementById('musicToggle');
    const volumeControl = document.getElementById('volumeControl');
    const buttons = document.querySelectorAll('.liquid-glass-button');
    let isPlaying = false;

    // Video playback
    function initVideo() {
      video.play().catch(error => {
        console.log('Video autoplay failed:', error.message);
        video.muted = true;
        video.play().catch(() => console.log('Video retry failed'));
      });
    }

    // Music player logic
    function initMusic() {
      const savedVolume = localStorage.getItem('musicVolume') || 0.5;
      music.volume = savedVolume;
      volumeControl.value = savedVolume;
      volumeControl.style.setProperty('--volume-progress', `${savedVolume * 100}%`);

      // Phát nhạc ngay khi vào web
      music.play().catch(err => console.log("Autoplay bị chặn:", err));

      musicToggle.addEventListener('click', playMusic);

      volumeControl.addEventListener('input', () => {
        music.volume = volumeControl.value;
        localStorage.setItem('musicVolume', volumeControl.value);
        volumeControl.style.setProperty('--volume-progress', `${volumeControl.value * 100}%`);
      });
    }

    // Cho phép click bất kỳ đâu để bật nhạc nếu đang pause
    document.body.addEventListener('click', () => {
      if (!isPlaying) {
        music.play().then(() => {
          musicToggle.classList.add('playing');
          isPlaying = true;
        }).catch(err => console.log("Play failed:", err));
      }
    }, { once: true });

    // Play/pause music function
    function playMusic() {
      if (!isPlaying) {
        music.play().then(() => {
          musicToggle.classList.add('playing');
          isPlaying = true;
        }).catch(error => {
          console.log('Music play failed:', error.message);
        });
      } else {
        music.pause();
        musicToggle.classList.remove('playing');
        isPlaying = false;
      }
    }


    // Button click effect
    function initButtons() {
      buttons.forEach(button => {
        button.addEventListener('click', () => {
          button.style.transform = 'translateY(2px)';
          setTimeout(() => {
            button.style.transform = 'translateY(0)';
          }, 200);
        });
      });
    }

    // Parallax effect
    function initParallax() {
      if ('ontouchstart' in window) return;
      window.addEventListener('mousemove', (e) => {
        requestAnimationFrame(() => {
          const x = (window.innerWidth / 2 - e.clientX) / 35;
          const y = (window.innerHeight / 2 - e.clientY) / 35;
          document.querySelector('.parallax').style.setProperty('--parallax-x', `${x}px`);
          document.querySelector('.parallax').style.setProperty('--parallax-y', `${y}px`);
        });
      });
    }

    // Preload media
    function preloadMedia() {
      video.setAttribute('preload', 'auto');
      music.setAttribute('preload', 'auto');
    }

    // Initialize all
    document.addEventListener('DOMContentLoaded', () => {
      preloadMedia();
      initVideo();
      initMusic();
      initButtons();
      initParallax();
    });

    // Handle visibility change
    document.addEventListener('visibilitychange', () => {
      if (document.visibilityState === 'hidden' && isPlaying) {
        music.pause();
      } else if (document.visibilityState === 'visible' && isPlaying) {
        music.play().catch(error => console.log('Music resume failed:', error.message));
      }
    });

    //Giữ trạng thái phát nhạc khi chuyển tab
    document.addEventListener('visibilitychange', () => {
      if (document.visibilityState === 'hidden' && isPlaying) {
        music.pause();
      } else if (document.visibilityState === 'visible' && isPlaying) {
        music.play().catch(error => console.log('Resume failed:', error));
      }
    });

  </script>
</body>
</html>